# 데이터베이스 오류 해결 가이드

## 문제 상황
광고주 회원가입 시 "DB 저장 오류: {} {}" 메시지가 콘솔에 출력되는 문제

## 원인 분석
이 오류는 주로 다음과 같은 이유로 발생합니다:

1. **데이터베이스 테이블이 존재하지 않음**
2. **Supabase 환경 변수가 올바르게 설정되지 않음**
3. **Row Level Security (RLS) 정책 문제**
4. **데이터베이스 스키마 불일치**

## 해결 방법

### 1. 환경 변수 확인
`.env.local` 파일에 다음 변수들이 올바르게 설정되어 있는지 확인하세요:

```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### 2. 데이터베이스 테이블 생성
Supabase 대시보드의 SQL Editor에서 `database-setup.sql` 파일의 내용을 실행하세요.

### 3. 테이블 존재 여부 확인
Supabase 대시보드에서 다음 테이블들이 존재하는지 확인:
- `public.users`
- `public.advertisers`

### 4. RLS 정책 확인
각 테이블에 대해 Row Level Security가 활성화되어 있고, 적절한 정책이 설정되어 있는지 확인하세요.

### 5. 콘솔 로그 확인
개발자 도구의 콘솔에서 다음 정보를 확인하세요:
- "스키마 확인 결과" 로그
- "Users 테이블 저장 오류" 또는 "Advertisers 테이블 저장 오류" 로그
- 오류 코드와 메시지

## 일반적인 오류 코드

- **42P01**: 테이블이 존재하지 않음
- **23505**: 중복 키 제약 조건 위반 (이미 존재하는 이메일)
- **42501**: 권한 부족 (RLS 정책 문제)

## 추가 디버깅

개선된 코드는 다음과 같은 정보를 제공합니다:
- 상세한 오류 메시지
- 데이터베이스 스키마 확인
- 단계별 성공/실패 로그

이 정보를 바탕으로 정확한 문제를 파악하고 해결할 수 있습니다. 